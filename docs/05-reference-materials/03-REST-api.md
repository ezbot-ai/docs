---
sidebar_position: 3
unlisted: true
tags: [rewards]
---

# REST API

The ezbot REST API allows you to programmatically interact with your ezbot account. You can use the API to create and manage projects, variables, and variations, as well as to get predictions and more.

## Fetch Predictions

This endpoint allows you to fetch predictions for a given project and session. Predictions are the changes that ezbot recommends for your site. You can use these predictions to personalize your site for each user.

Duplicate calls with the same `sessionId` will return the same predictions. If you want to get new predictions, you should generate a new `sessionId`.

More details on how we manage sessions coming soon. If you have any questions, please reach out to us at [support@ezbot.ai](mailto:support@ezbot.ai).

### Request

```http
GET https://api.ezbot.ai/predict?projectId={{projectId}}&sessionId={{sessionID}}
```

- `projectId` (required): The ID of the project you want to fetch predictions for. You can find this in your project's settings.
- `sessionId` (required): a Session Id is automatically generated by our sdk or snippet when a user visits your site. Example: `9fa3e44e-2c65-4016-a64b-d15a2649c654`
- No authentication is required for this endpoint, so that it can be called from client-side.

<details>
<summary>**Sample Response**</summary>
<div>
```json
{
    "holdback": false,
    "predictions": [
        {
            "key": "84086170-519a-4762-9422-0c9d7fadf635",
            "type": "visual",
            "version": "0.2",
            "value": "More conversions, less effort",
            "config": {
                "selector": ".row #hero-headline",
                "action": "setText",
                "attribute": null
            }
        },
        {
            "key": "hero_cta",
            "type": "visual",
            "version": "0.2",
            "value": "Explore Benefits",
            "config": {
                "selector": "#hero-cta",
                "action": "setText",
                "attribute": null
            }
        }
    ]
}
```
</div>
</details>

## Send a Reward Event

This endpoint allows you to send a reward event to ezbot. Reward events are signals that help ezbot understand how each combination of variations is performing. You can learn more about [how to pick the best reward for your use case here](/get-started/strategize) and [how to setup rewards here.](/get-started/project-setup)

ezbot wraps an open source tracking library called Snowplow. The easiest way to send a custom reward event to ezbot is via our SDK's `.trackRewardEvent()` function, and you may also send rewards to ezbot via our REST API. You can send a reward event to ezbot by sending a POST request to our Snowplow collector endpoint.

### Request

```http
POST https://api.ezbot.ai/com.snowplowanalytics.snowplow/tp2
```

### Request Body

```json
{
  "schema": "iglu:com.snowplowanalytics.snowplow/payload_data/jsonschema/1-0-4",
  "data": [
    {
      "e": "ue",
      "eid": "6721cf0e-1f21-4466-ba55-5a221034d8ec",
      "tv": "js-3.22.1",
      "tna": "ezbot",
      "aid": "4",
      "p": "web",
      "cookie": "1",
      "cs": "UTF-8",
      "lang": "en-US",
      "res": "565x1241",
      "cd": "24",
      "tz": "America/Chicago",
      "dtm": "1717533061603",
      "vp": "565x1241",
      "ds": "565x9347",
      "vid": "80",
      "sid": "9fa3e44e-2c65-4016-a64b-d15a2649c654",
      "duid": "1c449e1e-483f-47d6-a882-7a6fb2d5e44c",
      "url": "https://ezbot.ai/",
      "ue_px": "eyJzY2hlbWEiOiJpZ2x1OmNvbS5zbm93cGxvd2FuYWx5dGljcy5zbm93cGxvdy91bnN0cnVjdF9ldmVudC9qc29uc2NoZW1hLzEtMC0wIiwiZGF0YSI6eyJzY2hlbWEiOiJpZ2x1OmNvbS5lemJvdC9yZXdhcmRfZXZlbnQvanNvbnNjaGVtYS8xLTAtMCIsImRhdGEiOnsia2V5IjoiaGVyb19jdGFfY2xpY2tlZCIsInJld2FyZCI6MSwicmV3YXJkVW5pdHMiOiJjb3VudCJ9fX0",
      "cx": "eyJzY2hlbWEiOiJpZ2x1OmNvbS5zbm93cGxvd2FuYWx5dGljcy5zbm93cGxvdy9jb250ZXh0cy9qc29uc2NoZW1hLzEtMC0wIiwiZGF0YSI6W3sic2NoZW1hIjoiaWdsdTpjb20uc25vd3Bsb3dhbmFseXRpY3Muc25vd3Bsb3cvd2ViX3BhZ2UvanNvbnNjaGVtYS8xLTAtMCIsImRhdGEiOnsiaWQiOiI4Mzk5YmI4ZC0yOTVkLTQwZmMtOTY5Yi0xYTFhYmZiNmIzODAifX0seyJzY2hlbWEiOiJpZ2x1OmNvbS5nb29nbGUuYW5hbHl0aWNzL2Nvb2tpZXMvanNvbnNjaGVtYS8xLTAtMCIsImRhdGEiOnsiX2dhIjoiR0ExLjEuMTkyMDY2NTc5NS4xNjk3MDY2NDkyIn19LHsic2NoZW1hIjoiaWdsdTpvcmcuaWV0Zi9odHRwX2NsaWVudF9oaW50cy9qc29uc2NoZW1hLzEtMC0wIiwiZGF0YSI6eyJpc01vYmlsZSI6dHJ1ZSwiYnJhbmRzIjpbeyJicmFuZCI6IkNocm9taXVtIiwidmVyc2lvbiI6IjEyNCJ9LHsiYnJhbmQiOiJHb29nbGUgQ2hyb21lIiwidmVyc2lvbiI6IjEyNCJ9LHsiYnJhbmQiOiJOb3QtQS5CcmFuZCIsInZlcnNpb24iOiI5OSJ9XX19LHsic2NoZW1hIjoiaWdsdTpjb20uZXpib3QvcHJlZGljdGlvbnNfY29udGV4dC9qc29uc2NoZW1hLzEtMC0xIiwiZGF0YSI6eyJwcmVkaWN0aW9ucyI6W3sidmFyaWFibGUiOiI4NDA4NjE3MC01MTlhLTQ3NjItOTQyMi0wYzlkN2ZhZGY2MzUiLCJ2YWx1ZSI6Ik1vcmUgY29udmVyc2lvbnMsIGxlc3MgZWZmb3J0In0seyJ2YXJpYWJsZSI6Imhlcm9fY3RhIiwidmFsdWUiOiJFeHBsb3JlIEJlbmVmaXRzIn1dfX1dfQ",
      "stm": "1717533061606"
    }
  ]
}
```

### Required Fields

- `e`: The event type. For reward events, this should be `ue`.
- `tv`: The tracker version. This should be a string that represents where you're sending the event from. For example, `js-3.22.1`.
- `p`: The platform. This should be `web`.
- `ue_px`: The reward event payload. This is a **base64 encoded** JSON object that contains the reward event data.

### Reward Event Payload

The reward event payload should be a JSON object that conforms to the ezbot Reward Event JSON Schema. Here's an example of a raw reward event payload, before it's base64 encoded:

```json
{
  "schema": "iglu:com.ezbot/reward_event/jsonschema/1-0-0",
  "data": {
    "key": "hero_headline",
    "reward": 1,
    "rewardUnits": "count"
  }
}
```

<details>
<summary>**ezbot Reward Event JSON Schema**</summary>
<div>
```json
{
    "$schema": "http://iglucentral.com/schemas/com.snowplowanalytics.self-desc/schema/jsonschema/1-0-0#",
    "description": "ezbot reward event",
    "self": {
        "vendor": "com.ezbot",
        "name": "reward_event",
        "format": "jsonschema",
        "version": "1-0-0"
    },
    "type": "object",
    "properties": {
        "key": {
            "description": "The key of the reward",
            "type": "string"
        },
        "reward": {
            "description": "The reward amount in reward units",
            "type": [
                "number",
                "null"
            ],
            "minimum": 0
        },
        "rewardUnits": {
            "description": "The reward units",
            "type": [
                "string",
                "null"
            ],
            "minLength": 0,
            "maxLength": 256
        },
        "category": {
            "description": "An optional category for the reward",
            "type": [
                "string",
                "null"
            ]
        }
    },
    "required": [
        "key"
    ],
    "additionalProperties": false
}
```
</div>
</details>

For more information about the other fields, please refer to the [Snowplow Self Describing Events Docs](https://docs.snowplow.io/docs/collecting-data/collecting-from-own-applications/snowplow-tracker-protocol/going-deeper/example-requests/). See also [Snowplow's Schema Docs](https://github.com/snowplow/iglu-central/blob/master/schemas/com.snowplowanalytics.snowplow/payload_data/jsonschema/1-0-4).

:::tip

You can validate your event payloads against the ezbot Reward Event JSON Schema using a tool like [JSON Schema Validator](https://www.jsonschemavalidator.net/).

:::

:::tip

Currently, ezbot supports a **Binary Reward Strategy.** This means all sessions are scored 0 if no reward signal is received, and 1 if any reward signal is received. If multiple reward signals are sent during a session, the session will still be scored as 1.

For now, we recommend choosing one primary goal to optimize for. If you have multiple goals, consider creating separate projects for each goal.

:::

## Admin API

Though we're API-first, we're still working on our admin API docs. More coming soon. If you'd like to get started with the admin API, please reach out to us at [support@ezbot.ai](mailto:support@ezbot.ai).
